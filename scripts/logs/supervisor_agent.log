C:\Users\Prabha_Sharma\OneDrive - Dell Technologies\Documents\Prabha Sharma\Personal\IITJ\Projects\Assignments\practice\FM_Assignment1\MultiAgent MCP System\supervisor_agent\supervisor_api.py:61: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [50784]
INFO:     Waiting for application startup.
INFO:supervisor_agent.supervisor_agent:Fetching agent card from http://localhost:10100/.well-known/agent-card.json
INFO:httpx:HTTP Request: GET http://localhost:10100/.well-known/agent-card.json "HTTP/1.1 200 OK"
INFO:a2a.client.card_resolver:Successfully fetched agent card data from http://localhost:10100/.well-known/agent-card.json: {'additionalInterfaces': None, 'capabilities': {'extensions': None, 'pushNotifications': False, 'stateTransitionHistory': None, 'streaming': False}, 'defaultInputModes': ['text/plain'], 'defaultOutputModes': ['text/plain'], 'description': 'Loads CSV data, performs feature engineering, and returns preprocessed file path.', 'documentationUrl': None, 'iconUrl': None, 'name': 'Data MCP Agent', 'preferredTransport': 'JSONRPC', 'protocolVersion': '0.3.0', 'provider': None, 'security': None, 'securitySchemes': None, 'signatures': None, 'skills': [{'description': 'Loads data from local path or remote MCP, selects columns, and performs preprocessing.', 'examples': None, 'id': 'data_loader', 'inputModes': None, 'name': 'Data Loader MCP', 'outputModes': None, 'security': None, 'tags': ['data', 'mcp', 'feature-engineering']}], 'supportsAuthenticatedExtendedCard': None, 'url': 'http://localhost:10100/', 'version': '1.0.0'}
INFO:supervisor_agent.supervisor_agent:data_agent card fetched successfully.
INFO:supervisor_agent.supervisor_agent:Fetching agent card from http://localhost:10200/.well-known/agent-card.json
INFO:httpx:HTTP Request: GET http://localhost:10200/.well-known/agent-card.json "HTTP/1.1 200 OK"
INFO:a2a.client.card_resolver:Successfully fetched agent card data from http://localhost:10200/.well-known/agent-card.json: {'additionalInterfaces': None, 'capabilities': {'extensions': None, 'pushNotifications': False, 'stateTransitionHistory': None, 'streaming': False}, 'defaultInputModes': ['text/plain'], 'defaultOutputModes': ['text/plain'], 'description': 'Use of LLM to get data for Student..', 'documentationUrl': None, 'iconUrl': None, 'name': 'ML MCP Agent', 'preferredTransport': 'JSONRPC', 'protocolVersion': '0.3.0', 'provider': None, 'security': None, 'securitySchemes': None, 'signatures': None, 'skills': [{'description': 'Use of LLM to get data for Student.', 'examples': None, 'id': 'ml_trainer', 'inputModes': None, 'name': 'ML Trainer MCP', 'outputModes': None, 'security': None, 'tags': ['ml', 'mcp', 'training', 'modeling']}], 'supportsAuthenticatedExtendedCard': None, 'url': 'http://localhost:10200/', 'version': '1.0.0'}
INFO:supervisor_agent.supervisor_agent:ml_agent card fetched successfully.
INFO:supervisor_agent.supervisor_agent:Fetching agent card from http://localhost:10300/.well-known/agent-card.json
INFO:httpx:HTTP Request: GET http://localhost:10300/.well-known/agent-card.json "HTTP/1.1 200 OK"
INFO:a2a.client.card_resolver:Successfully fetched agent card data from http://localhost:10300/.well-known/agent-card.json: {'additionalInterfaces': None, 'capabilities': {'extensions': None, 'pushNotifications': False, 'stateTransitionHistory': None, 'streaming': False}, 'defaultInputModes': ['text/plain'], 'defaultOutputModes': ['application/json'], 'description': 'Agent that triggers MCP_DV to create visualizations.', 'documentationUrl': None, 'iconUrl': None, 'name': 'DV Agent', 'preferredTransport': 'JSONRPC', 'protocolVersion': '0.3.0', 'provider': None, 'security': None, 'securitySchemes': None, 'signatures': None, 'skills': [{'description': 'Generates plots from ML predictions and saves artifacts.', 'examples': None, 'id': 'visualization', 'inputModes': None, 'name': 'Visualization MCP', 'outputModes': None, 'security': None, 'tags': ['viz', 'plots', 'mcp']}], 'supportsAuthenticatedExtendedCard': None, 'url': 'http://localhost:10300/', 'version': '1.0.0'}
INFO:supervisor_agent.supervisor_agent:dv_agent card fetched successfully.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:10500 (Press CTRL+C to quit)
INFO:supervisor_agent.supervisor_agent:Running pipeline via LangGraph...
INFO:supervisor_agent.supervisor_agent:Calling planner agent via A2AClient...
INFO:httpx:HTTP Request: POST http://localhost:10200/ "HTTP/1.1 200 OK"
INFO:supervisor_agent.supervisor_agent:----------------------------------FORWARD LAYER 1 CLIENT REQUEST TO A2A -------------------------------
INFO:supervisor_agent.supervisor_agent:Query: STMESSAGE={};
INFO:supervisor_agent.supervisor_agent:Calling data planner agent via A2AClient...
INFO:httpx:HTTP Request: POST http://localhost:10100/ "HTTP/1.1 200 OK"
INFO:supervisor_agent.supervisor_agent:Data Agent Response: {'id': '2c3e683e-9318-4f3d-8fe1-95881d3e2afa', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': '87eb48b7-17ec-4bed-bb9b-31a1b30f7ef0', 'parts': [{'kind': 'text', 'text': '{\n  "rows": "",\n  "columns": "",\n  "target": "",\n  "source": "local",\n  "processed_path": "C:\\\\Users\\\\Prabha_Sharma\\\\OneDrive - Dell Technologies\\\\Documents\\\\Prabha Sharma\\\\Personal\\\\IITJ\\\\Projects\\\\Assignments\\\\practice\\\\FM_Assignment1\\\\MultiAgent MCP System\\\\student_ui\\\\static\\\\resource"\n}'}], 'role': 'agent'}}
INFO:supervisor_agent.supervisor_agent:DV Stage: Calling dv_agent...
INFO:supervisor_agent.supervisor_agent:DV Promt: 
INFO:supervisor_agent.supervisor_agent:You are the Data Visualization Agent.

Your job:
1. Read the processed ML output below.
2. Generate visualizations OR combined HTML content.
3. ALWAYS return pure HTML only. No markdown.

ML Output:
{
  "error": {
    "code": -32603,
    "message": "Internal error"
  },
  "jsonrpc": "2.0"
}
INFO:httpx:HTTP Request: POST http://localhost:10300/ "HTTP/1.1 200 OK"
INFO:supervisor_agent.supervisor_agent:{'id': 'fb03095a-c5c0-4856-90bc-3cadc815625a', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': 'b211318f-57c3-4c32-9255-69a3c73a01de', 'parts': [{'kind': 'text', 'text': '\n            <html>\n            <head>\n                <title>Combined Resource Visualization</title>\n                <style>\n                    body {\n                        font-family: Arial, sans-serif;\n                        margin: 20px;\n                        background: #f7f7f7;\n                    }\n                    h1 {\n                        text-align: center;\n                        margin-bottom: 40px;\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>Visualization Results</h1>\n                \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>PDF Resource: academic_calendar.pdf</h2>\n                        <embed src="/static/resource/academic_calendar.pdf" type="application/pdf" width="100%" height="800px" />\n                    </section>\n                    \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: academic_programs.html</h2>\n                        <iframe src="/static/resource/academic_programs.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: academic_programs_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: all_curriculum.html</h2>\n                        <iframe src="/static/resource/all_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: all_curriculum_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: ug_curriculum.html</h2>\n                        <iframe src="/static/resource/ug_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: ug_curriculum_css</p>\n            </body>\n            </html>\n            '}], 'role': 'agent'}}
WARNING:supervisor_agent.supervisor_agent:DV Agent did not return expected HTML. Full response returned.
INFO:supervisor_agent.supervisor_agent:DV Stage complete.
INFO:supervisor_agent.supervisor_agent:Pipeline finished.
INFO:supervisor_agent.supervisor_agent:{'messages': [{'role': 'user', 'content': 'calandar'}], 'data_results': {'id': '2c3e683e-9318-4f3d-8fe1-95881d3e2afa', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': '87eb48b7-17ec-4bed-bb9b-31a1b30f7ef0', 'parts': [{'kind': 'text', 'text': '{\n  "rows": "",\n  "columns": "",\n  "target": "",\n  "source": "local",\n  "processed_path": "C:\\\\Users\\\\Prabha_Sharma\\\\OneDrive - Dell Technologies\\\\Documents\\\\Prabha Sharma\\\\Personal\\\\IITJ\\\\Projects\\\\Assignments\\\\practice\\\\FM_Assignment1\\\\MultiAgent MCP System\\\\student_ui\\\\static\\\\resource"\n}'}], 'role': 'agent'}}, 'ml_result': {'error': {'code': -32603, 'message': 'Internal error'}, 'jsonrpc': '2.0'}, 'dv_result': {'id': 'fb03095a-c5c0-4856-90bc-3cadc815625a', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': 'b211318f-57c3-4c32-9255-69a3c73a01de', 'parts': [{'kind': 'text', 'text': '\n            <html>\n            <head>\n                <title>Combined Resource Visualization</title>\n                <style>\n                    body {\n                        font-family: Arial, sans-serif;\n                        margin: 20px;\n                        background: #f7f7f7;\n                    }\n                    h1 {\n                        text-align: center;\n                        margin-bottom: 40px;\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>Visualization Results</h1>\n                \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>PDF Resource: academic_calendar.pdf</h2>\n                        <embed src="/static/resource/academic_calendar.pdf" type="application/pdf" width="100%" height="800px" />\n                    </section>\n                    \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: academic_programs.html</h2>\n                        <iframe src="/static/resource/academic_programs.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: academic_programs_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: all_curriculum.html</h2>\n                        <iframe src="/static/resource/all_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: all_curriculum_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: ug_curriculum.html</h2>\n                        <iframe src="/static/resource/ug_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: ug_curriculum_css</p>\n            </body>\n            </html>\n            '}], 'role': 'agent'}}}
INFO:supervisor_agent.supervisor_api:Combined files : {'messages': [{'role': 'user', 'content': 'calandar'}], 'data_results': {'id': '2c3e683e-9318-4f3d-8fe1-95881d3e2afa', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': '87eb48b7-17ec-4bed-bb9b-31a1b30f7ef0', 'parts': [{'kind': 'text', 'text': '{\n  "rows": "",\n  "columns": "",\n  "target": "",\n  "source": "local",\n  "processed_path": "C:\\\\Users\\\\Prabha_Sharma\\\\OneDrive - Dell Technologies\\\\Documents\\\\Prabha Sharma\\\\Personal\\\\IITJ\\\\Projects\\\\Assignments\\\\practice\\\\FM_Assignment1\\\\MultiAgent MCP System\\\\student_ui\\\\static\\\\resource"\n}'}], 'role': 'agent'}}, 'ml_result': {'error': {'code': -32603, 'message': 'Internal error'}, 'jsonrpc': '2.0'}, 'dv_result': {'id': 'fb03095a-c5c0-4856-90bc-3cadc815625a', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': 'b211318f-57c3-4c32-9255-69a3c73a01de', 'parts': [{'kind': 'text', 'text': '\n            <html>\n            <head>\n                <title>Combined Resource Visualization</title>\n                <style>\n                    body {\n                        font-family: Arial, sans-serif;\n                        margin: 20px;\n                        background: #f7f7f7;\n                    }\n                    h1 {\n                        text-align: center;\n                        margin-bottom: 40px;\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>Visualization Results</h1>\n                \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>PDF Resource: academic_calendar.pdf</h2>\n                        <embed src="/static/resource/academic_calendar.pdf" type="application/pdf" width="100%" height="800px" />\n                    </section>\n                    \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: academic_programs.html</h2>\n                        <iframe src="/static/resource/academic_programs.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: academic_programs_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: all_curriculum.html</h2>\n                        <iframe src="/static/resource/all_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: all_curriculum_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: ug_curriculum.html</h2>\n                        <iframe src="/static/resource/ug_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: ug_curriculum_css</p>\n            </body>\n            </html>\n            '}], 'role': 'agent'}}}
Received question: calandar
Returning to client: {'messages': [{'role': 'user', 'content': 'calandar'}], 'data_results': {'id': '2c3e683e-9318-4f3d-8fe1-95881d3e2afa', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': '87eb48b7-17ec-4bed-bb9b-31a1b30f7ef0', 'parts': [{'kind': 'text', 'text': '{\n  "rows": "",\n  "columns": "",\n  "target": "",\n  "source": "local",\n  "processed_path": "C:\\\\Users\\\\Prabha_Sharma\\\\OneDrive - Dell Technologies\\\\Documents\\\\Prabha Sharma\\\\Personal\\\\IITJ\\\\Projects\\\\Assignments\\\\practice\\\\FM_Assignment1\\\\MultiAgent MCP System\\\\student_ui\\\\static\\\\resource"\n}'}], 'role': 'agent'}}, 'ml_result': {'error': {'code': -32603, 'message': 'Internal error'}, 'jsonrpc': '2.0'}, 'dv_result': {'id': 'fb03095a-c5c0-4856-90bc-3cadc815625a', 'jsonrpc': '2.0', 'result': {'kind': 'message', 'messageId': 'b211318f-57c3-4c32-9255-69a3c73a01de', 'parts': [{'kind': 'text', 'text': '\n            <html>\n            <head>\n                <title>Combined Resource Visualization</title>\n                <style>\n                    body {\n                        font-family: Arial, sans-serif;\n                        margin: 20px;\n                        background: #f7f7f7;\n                    }\n                    h1 {\n                        text-align: center;\n                        margin-bottom: 40px;\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>Visualization Results</h1>\n                \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>PDF Resource: academic_calendar.pdf</h2>\n                        <embed src="/static/resource/academic_calendar.pdf" type="application/pdf" width="100%" height="800px" />\n                    </section>\n                    \n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: academic_programs.html</h2>\n                        <iframe src="/static/resource/academic_programs.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: academic_programs_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: all_curriculum.html</h2>\n                        <iframe src="/static/resource/all_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: all_curriculum_css</p>\n                    <section style="margin-bottom:30px; padding:20px; border:1px solid #ccc; border-radius:8px;">\n                        <h2>HTML Resource: ug_curriculum.html</h2>\n                        <iframe src="/static/resource/ug_curriculum.html" \n                                style="width:100%; height:600px; border:none;">\n                        </iframe>\n                    </section>\n                    <p style=\'color:orange\'>Unsupported file type: ug_curriculum_css</p>\n            </body>\n            </html>\n            '}], 'role': 'agent'}}}
INFO:     127.0.0.1:58526 - "POST /ask HTTP/1.1" 200 OK
